/**
 * 
 */
package paragraphing;

import java.util.ArrayList;

/**
 * @author XYZ
 *
 */
public class Paragrapher implements ParagrapherI {
	DestinationI destination ;
	int width = 20;
	private ArrayList<String> lines = new ArrayList<String>() ;

	public Paragrapher(DestinationI dest) {
		destination = dest ;
	}

	/** 
	 * @see paragraphing.ParagrapherI#setWidth(int)
	 */
	@Override
	public void setWidth(int width) {
		// TODO Auto-generated method stub
		this.width = width;
	}

	/**
	 * @see paragraphing.ParagrapherI#addWord(java.lang.String[])
	 */
	@Override
	public void addWord(String[] parts) {
		// TODO Auto-generated method stub
		if (lines.isEmpty()) {
			lines.add("<p>");
		}
		else {
			String str = "";
			for( String part :  parts ) { 
				if ((str + part).length() <= this.width) {
					str = str + part;
				} else {
					lines.add("<line>" + str + "</line>");
					str = part;
				}
			}
		}

	}

	/**
	 * @see paragraphing.ParagrapherI#addWord(java.lang.String)
	 */
	@Override
	public void addWord(String word) {
		// TODO Auto-generated method stub
	}

	/* (non-Javadoc)
	 * @see paragraphing.ParagrapherI#ship()
	 */
	@Override
	public void ship() {
		// TODO Auto-generated method stub
		lines.add("</p>");
		String[] linesStringArray = (String[]) lines.toArray();
		destination.addLines(linesStringArray);
	}

}
